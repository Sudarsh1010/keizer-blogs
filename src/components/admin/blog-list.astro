---
import { Button } from "@/components/ui/button"
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table"
import { Pencil, Trash2, User, Calendar } from 'lucide-react'
import type { BlogInterface } from "../../db/schema/blog";

const { blogs } = Astro.props as { blogs: BlogInterface[] };


function truncate(str: string, length: number) {
  return str.length > length ? str.substring(0, length) + "..." : str;
}
---

<div class="overflow-x-auto">
  <Table>
    <TableHeader>
      <TableRow>
        <TableHead className="font-semibold">Title</TableHead>
        <TableHead className="font-semibold">Content</TableHead>
        <TableHead className="font-semibold">
          <div class="flex items-center space-x-1">
            <User className="h-4 w-4" />
            <span>Author</span>
          </div>
        </TableHead>
        <TableHead className="font-semibold">
          <div class="flex items-center space-x-1">
            <Calendar className="h-4 w-4" />
            <span>Created At</span>
          </div>
        </TableHead>
        <TableHead className="font-semibold">Actions</TableHead>
      </TableRow>
    </TableHeader>
    <TableBody>
      {blogs.map((blog: BlogInterface) => (
        <TableRow>
          <TableCell className="font-medium">{blog.title}</TableCell>
          <TableCell className="text-gray-600">{truncate(blog.body, 50)}</TableCell>
          <TableCell>{blog.authorId}</TableCell>
          <TableCell>{blog.createdAt ? new Date(Number(blog.createdAt)).toLocaleString() : ''}</TableCell>
          <TableCell>
            <div class="flex space-x-2">
              <Button variant="outline" size="sm">
                <Pencil className="h-4 w-4 mr-2" />
                Edit
              </Button>
              <Button variant="outline" size="sm" className="text-red-600 hover:text-red-700 hover:bg-red-50">
                <Trash2 className="h-4 w-4 mr-2" />
                Delete
              </Button>
            </div>
          </TableCell>
        </TableRow>
      ))}
    </TableBody>
  </Table>
</div>

